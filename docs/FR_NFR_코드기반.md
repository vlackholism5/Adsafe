# 2.1 FR (Functional Requirements)

> 현재 구현된 AdSafe MVP 코드에 맞춰 정리한 기능 요구사항입니다.

---

## 공통

**인증 / 권한 (Role 기반 접근)**

- 이메일·비밀번호 로그인, 회원가입, 회원탈퇴, 계정 설정
- 역할: Admin / User (Admin만 어드민 콘솔 메뉴 노출)
- 사용자·권한·비활성화는 어드민 사용자 관리에서 수정 가능
- 데이터: localStorage 기준, 서버 미연동

**워크스페이스 기반 멀티테넌시**

- 미구현
- 단일 테넌트·로컬 저장 기준으로 동작, 추후 확장 대상

**주요 이벤트 감사 로그 기록**

- 룰셋 버전 활성화/비활성화 시 감사 로그에 기록
- 감사 로그 조회 · 필터(액션/엔티티 타입/기간) · 페이지네이션 제공
- 룰/퀴즈/사용자 변경 감사는 추후 확장

---

## AdSafe Mode (제작/검수)

**프로젝트 생성/관리 (업종/채널)**

- 프로젝트 CRUD 없음
- 검수 화면에서 "광고 유형" 선택 + 문구 제목·광고 문구 입력만 지원

**문구 작성/편집 + 버전 이력 자동 생성**

- 문구는 검수 실행 단위로 이력에 저장
- 검수 이력 목록·상세에서 실행 시점의 문구·결과 조회 가능
- 별도 문구 버전 이력 테이블은 없음

**검수 실행 (버튼 1회 = inspection_run)**

- [검수하기] 1회 클릭 시 1회 검수 실행

**전처리 텍스트 저장 (normalized_text)**

- 검수 실행 시 전처리(normalize) 수행 후, 검수 이력에 원문(rawText) 및 결과(result) 저장
- 전처리 결과는 엔진 내부에서 사용·결과에 반영

**룰셋 버전 고정으로 결과 재현**

- 현재: 단일 룰셋(ADU_RULES) 사용, 검수 이력에 rule_set_version_id 미저장
- 동일 문구·동일 룰 데이터 기준 재실행 시 결과 재현 가능

**적발 항목 리스트 (inspection_findings)**

- 검수 결과로 적발 항목 리스트 제공 (리스크 코드·레벨·매칭 표현·설명·수정 가이드)
- 요약(위험도) 제공, 문구 내 매칭 표현 하이라이트

**검수 이력 조회/상세 조회**

- 검수 이력 목록 (페이지네이션·필터)
- 상세 (기본 정보·검수 문구·결과 요약·적발 항목) 조회 가능

---

## AduSafe Mode (교육)

**카테고리 선택 (risk_code 기반)**

- 미구현
- 전체 문제 은행에서 랜덤 10문제 출제 (카테고리별 선택은 추후 확장)

**문제 출제/보기 노출**

- 문제 은행(adusafe-questions.js) 기반 4지선다
- 학습하기: 10문항 순차 노출
- 복습하기: 이전 틀린 문항만 출제

**답안 제출/즉시 채점**

- 10문항 응답 후 결과 페이지에서 일괄 채점·정오답 표시

**해설 제공**

- 결과 페이지에서 문항별 근거 설명(explanation)·수정 가이드(suggestion) 제공

**학습 이력/진행도/숙련도 저장**

- 학습 이력(날짜·정답 수·총 문제 수·정답률) 및 틀린 문항(복습용) localStorage 저장
- 학습 현황 페이지: 통계(퀴즈 횟수·총 문제 수·정답 수·평균 정답률) 및 최근 이력 목록 조회
- 카테고리별 숙련도는 미구현

---

## Admin Console

**사용자 초대/권한/비활성화**

- 사용자 목록: 인증 데이터(adsafe_users) 기반 동적 표시
- 권한(Admin/User)·상태(활성/비활성) 수정 가능
- 사용자 초대 UI만 존재, 초대 대기 목록·초대 수락 플로우 미구현 (회원가입으로만 사용자 추가)

**risk_taxonomy CRUD (정의/예시/활성)**

- 목록: rules-data.js(ADU_RULES) 기반 동적 표시
- 수정 모달로 항목 조회·편집 UI 제공
- 저장 시 코드 반영/서버 연동은 추후

**rule_set_versions CRUD + 활성화/폐기**

- 목록: rule-set-versions.js 및 localStorage 기반
- 버전별 활성화/비활성화 동작
- 상세 조회 시 활성 버전 포함 룰 목록 표시
- 새 버전 생성 모달은 UI만 제공

**rules CRUD (버전별 관리, 삭제 지양)**

- 목록: rules-data.js(ADU_RULES) 기반 동적 표시
- 필터(리스크 코드/유형/위험도)·수정 모달 제공
- 저장 시 코드/서버 반영은 추후

**룰 테스트/시뮬레이션 (샘플 문구)**

- 미구현
- 활성 룰셋 기준 샘플 문구 findings 미리보기는 추후 확장

**quizzes/choices CRUD + 활성화**

- 퀴즈·보기: adusafe-questions.js에 고정
- Admin에서 문제은행/보기 CRUD·활성화 관리 화면 미구현

**운영 통계 대시보드**

- 미구현 (트래픽/리스크/룰 효율/학습 성취 추후 확장)

**audit_logs 조회 (필터/검색)**

- 감사 로그 목록 · 필터(액션/엔티티 타입/기간) · 페이지네이션 제공
- 검색어 검색은 추후

---

# 2.2 NFR (Non-Functional Requirements)

> 현재 구현 상태에 맞춰 정리한 비기능 요구사항입니다.

| 항목 | 기준 | 현재 구현 참고 |
| :--- | :--- | :--- |
| 성능 | 검수 요청 평균 3초 이내 (95p 5초 이내) | 클라이언트 단일 실행. 서버 미구현으로 구간 측정 없음. 서버 도입 시 해당 기준 적용 대상. |
| 확장성 | 룰/카테고리/업종 룰셋 추가가 코드 변경 최소로 가능 | 룰·택소노미는 rules-data.js, 룰셋 버전은 rule-set-versions.js 등 JS·데이터 파일로 추가·수정 가능. |
| 재현성 | 문구 버전 + 룰셋 버전 + 전처리 결과로 과거 결과 재현 | 검수 이력에 문구·결과(전처리 반영)·적발 항목 저장. 룰셋 버전 ID 미저장. 동일 룰·문구 재실행 시 재현 가능. |
| 추적성 | 검수 실행/룰 변경/퀴즈 변경은 audit_logs에 기록 | 룰셋 버전 활성/비활성만 감사 로그 기록. 룰·퀴즈·검수 실행 기록은 추후 확장. |
| 신뢰/투명성 | 결과는 항상 근거(룰/택소노미/설명)를 포함 | 검수 결과·퀴즈 해설에 리스크 코드·설명·수정 가이드 포함. |
| 보안 | 워크스페이스 격리 (테넌트 간 데이터 접근 차단) | 워크스페이스·멀티테넌시 미구현. 단일 테넌트·로컬 저장. 격리는 추후 서버·테넌트 도입 시 적용. |
| 가용성 | 장애 시 graceful fallback (검수 실패/재시도) | 클라이언트 단일 실행. 검수 실패 시 사용자 재시도. 서버 장애 대응·fallback은 서버 도입 시 적용. |
| 책임 경계 | UI 전 구간 "참고용/법적 판정 아님" 고지 | 로그인·메인·검수·학습·어드민 등 화면 하단 또는 안내 문구로 참고용·법적 판정 아님 고지. |
